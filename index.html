<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document</title>
</head>
<body>
    <h1>Giphy Search</h1>
    <form>
        <input type="text">
        <button type="submit">Search</button>
    </form>
    <p>Invalid search</p>
    <img src="#">
    <button id="henry-btn">More Henry</button>
  <style>

    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
    }

    body {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100vh;
        background-color: black;
        gap: 24px;
        font-size: 16px;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    }

    h1, p {
        color: white;
    }

    form {
        display: flex;
        
    }

    input {
        padding: 12px 16px;
        outline: none;
        border: none;
        font-size: 1rem;
        border-radius: 4px 0px 0px 4px;
    }

    p {
        display: none;
    }

    p.error {
        display: block;
    }

    img {
        min-height: 336px;
    }

    button {
        padding: 12px 16px;
        border-radius: 4px;
        outline: none;
        border: none;
        color: black;
        background-color: white;
        font-size: 1rem;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    }

    button[type="submit"] {
        border-radius: 0px 4px 4px 0px;
    }   

    button:hover {
        background-color: #f0f0f0;
        cursor: pointer;
    }
  </style>
  <script>
    const img = document.querySelector('img');
    const henryBtn = document.getElementById('henry-btn');
    const form = document.querySelector('form');
    const input = document.querySelector('input');
    const errorMsg = document.querySelector('p');

    function translateImage() {
        fetch('https://api.giphy.com/v1/gifs/translate?api_key=jHDqa0zqAFNZGDHkOfIxy5h0vsYmWS85&s=henry-cavill', {
        mode: "cors"
        }).then(function(response) {
            return response.json();
        }).then(function(response) {
            img.src = response.data.images.original.url;
            errorMsg.classList.remove('error');
        });
    }
    translateImage();

    function searchImage(str) {
        const query = str.toLowerCase().split(' ').join('-');

        fetch('https://api.giphy.com/v1/gifs/search?api_key=jHDqa0zqAFNZGDHkOfIxy5h0vsYmWS85&q=' + query, {
            mode:"cors"
        }).then(function(response) {
            return response.json();
        }).then(function(response) {
            const imageIndex = Math.floor(Math.random() * response.data.length);
            img.src = response.data[imageIndex].images.original.url;
            errorMsg.classList.remove('error');
        }).catch(function(error) {
            errorMsg.classList.add('error');
        }); 
    }

    henryBtn.addEventListener('click', translateImage);
    form.addEventListener('submit', function(e) {
        e.preventDefault();
        searchImage(input.value);
    });
  </script>
</body>
</html>